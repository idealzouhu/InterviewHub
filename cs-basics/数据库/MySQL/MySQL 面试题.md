[TOC]

## 基本概念

### 数据库范式

数据库的三大范式是指设计关系型数据库时所遵循的设计规则，它们分别为第一范式 (1NF)、第二范式 (2NF) 和第三范式 (3NF)。每个范式都有其目标，**旨在减少数据冗余和提高数据一致性**。它们之间**存在递进关系**，满足更高范式的表一定满足较低范式的要求。

- **第一范式 (1NF)** ：确保数据库中的每个字段都是不可再分的原子值。

- **第二范式 (2NF)**：满足 1NF 的前提下，<font color="blue">消除非主属性对码的**部分依赖**</font>，确保每个非主属性完全函数依赖于主键。

- **第三范式 (3NF)**：满足 2NF 的前提下，<font color="blue">消除非主属性之间的**传递依赖**</font>。

<br/>



### 数据库设计步骤

1. 需求分析：通过详细调查现实世界要处理的对象(组织、部门、企业等)，充分了解原系统(手工系统或计算机系统)的工作概况，明确用户的各种需求，然后在此基础上确定新系统的功能。
2. **概念结构设计**：绘制 E-R 图
3. **逻辑结构设计**：将 E-R 图转换成表
4. **物理结构设计**：为所设计的数据库选择合适的存储结构和存取路径
5. 数据库的实施和维护：编程，测试，运行，数据库维护

<br/>



### 描述数据库的三层模式架构

三层模式架构包括：

1. **外模式（External Schema）**：面向用户的视图。
2. **概念模式（Conceptual Schema）**：描述数据的逻辑结构，独立于物理存储。
3. **内模式（Internal Schema）**：描述数据在物理存储设备上的表示。

通过这三层架构，数据库实现了数据的**物理独立性**和**逻辑独立性**：

- **物理独立性**：内模式的改变不影响概念模式和外模式。
- **逻辑独立性**：概念模式的改变不影响外模式。

<br/>



### 存储过程的优缺点

存储的优点有：

- **性能更优**：存储过程在数据库中**预编译并优化**，运行时不需要再次编译，执行效率较高。
- **逻辑封装**：存储过程将复杂的业务逻辑封装在数据库中，便于集中管理和维护。

缺点包括：

- **开发调试复杂**：存储过程的调试工具和功能通常不如应用程序开发工具强大，调试和测试困难。
- **难替换数据库引擎**：业务逻辑绑定在数据库中后，应用程序对数据库的依赖性增强，不易替换数据库引擎。

<br/>



## SQL 语法

### SQL 语句分类

- 数据查询语言（DQL） - Data Query Language   ： 从数据库中查询数据。
- 数据操作语言（DML） - Data Manipulation Language： 操作数据库中的数据
- 数据定义语言（DDL） - Data Definition Language： 创建和删除数据库结构、表、索引等对象
- 数据控制语言（DCL） - Data Control Language ： 控制数据库中的数据访问权限

值得注意的是，不要弄混 DML 和 DCL。

<br/>



### drop、delete、truncate的区别

| 特性                 | `DROP`                     | `DELETE`                         | `TRUNCATE`                     |
| -------------------- | -------------------------- | -------------------------------- | ------------------------------ |
| **功能**             | 删除整个表结构及数据       | 删除表中符合条件的部分或全部数据 | 删除表中的所有数据             |
| **是否保留表结构**   | 不保留                     | 保留                             | 保留                           |
| **是否支持条件删除** | 不支持                     | 支持                             | 不支持                         |
| **是否支持回滚**     | 不支持                     | 支持                             | 不支持（某些数据库支持）       |
| **操作性能**         | 快速，但会重建表的相关信息 | 慢，逐行删除，影响性能           | 快速，直接清空数据，无逐行操作 |
| **触发器支持**       | 不触发                     | 会触发                           | 不触发                         |
| **使用场景**         | 删除表结构，永久移除表     | 删除部分数据，保持表结构         | 清空表数据，保留表结构         |

<br/>



## 触发器

### **触发器怎么删除?**

删除是使用 `DROP` ，不要跟 REMOVE 、DELETE 弄混。

```sql
DROP TRIGGER [IF EXISTS] trigger_name;
```

**`IF EXISTS`**:如果触发器不存在，避免抛出错误。

**`trigger_name`**:要删除的触发器的名称。

<br/>



## 视图

### 视图是否能更新?

在 **MySQL** 中，如果视图是可更新的，对视图执行的 `INSERT`、`UPDATE`、或 `DELETE` 操作会直接影响其底层数据表的内容。

- 视图 **在满足条件** 时可以更新，主要是简单视图（单表、无聚合、无计算列）。

- 复杂视图（如多表联接、分组、聚合）通常是不可更新的。

<br/>



## 索引

### MySQL 索引类型？



### 什么是全文搜索？

全文搜索是针对文本字段的一种高级搜索方法，<font color="blue">**专门用于查找大段文字中是否包含某些关键字或短语**</font>。与简单的 `LIKE` 模糊匹配不同，全文搜索具有以下特点：

- **使用全文索引**：全文搜索会为指定字段创建一种特殊的索引（`FULLTEXT`），加速搜索操作。
- **分词**：全文搜索会将长文本切分成若干“词”（Token），并按词匹配，而不是单纯字符匹配。
- **评分**：全文搜索会根据匹配的相关性给搜索结果打分，以便按相关性排序。

相关使用案例如下所示。

```sql
CREATE TABLE articles (
    id INT PRIMARY KEY,
    title VARCHAR(255),
    content TEXT,
    FULLTEXT (title, content) -- 创建全文索引
);

SELECT * FROM articles
WHERE MATCH(title, content) AGAINST('database');
```

<br/>



## 其他

### MySQL 如何防止 SQL 注入？